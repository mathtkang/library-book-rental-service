# nginx.conf

# Define the user and group that NGINX will run as
user nginx;
worker_processes auto;

# Specify the location of the error log
error_log /var/log/nginx/error.log;

# Specify the location of the access log
access_log /var/log/nginx/access.log;

# Configure the HTTP server
http {
    # # Set the MIME type mappings
    # include /etc/nginx/mime.types;

    # # Define the default type for unknown file types
    # default_type application/octet-stream;

    # # Configure the Gzip settings
    # gzip on;
    # gzip_comp_level 5;
    # gzip_min_length 256;
    # gzip_proxied any;
    # gzip_types application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/plain text/x-component;
    # gzip_vary on;

    # Configure the server
    server {
        # Specify the listening port
        listen 80;

        # Specify the server name
        # server_name your_domain.com www.your_domain.com;  # aws ec2 public ip

        # Define the location for static files
        location /static {
            alias /app/static/css;  # Change to your static files directory
            alias /app/static/js;
        }

        # Define the location for media files
        location /media {
            alias /app/static/img;  # Change to your media files directory
            alias /app/static/img_book;
            alias /app/static/favicon;
        }

        # Specify the location for the application
        location / {
            proxy_pass http://127.0.0.1:8088;  # Gunicorn address
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            # proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}
